# Aspects

This is a discussion of the various aspects of the database that will need to be discussed or at least
mentioned in the paper:

## Object/Stream Identity

[Ship of Theseus](https://en.wikipedia.org/wiki/Ship_of_Theseus)

As far as the database is concerned, an entity is a stream identified with a
UUID, though this could in principle be some other unique identifier, such as a
cryptographically verifiable expression of identity (e.g. ed25519)

- Are data profiles (summary statistics) metadata?  Or data?

## Temporal Semantics

- What is time in this database?
- How do we slice and dice it in queries?
- Is it fine-grained or not? We probably want the option of up-to nanosecond precision on timestamps,
  which may involve applying a single exact timestamp across multiple streams. For items added by humans,
  however, we can use a much looser granularity
- Is there a global notion of time? Do all data reporters need to be synchronized, or can they just
  report whatever time they want? Is time synchronization outside the context of the system (e.g. make
  sure everyone has NTP), or is it enforced by the system (timestamps applied upon delivery? This may
  be the right way to go?)
    - should timestamps in the past be treated differently? Timestamps should be able to be specified
      in relation to each other (e.g. "5 seconds before the last time this tag was applied")
    - should timestamps be specifyable by the client iff they are not applied at the head of a stream,
      i.e. "now"?
- If metadata is generated by machine you’ll need fine-grained time.  If by humans then not.
- Is it reasonable to assume clock synchrony across devices?  Do you need to support multiple “opinions” or “perspectives” on time?

## Query Language
- How do we gauge expressiveness?
- Is the language expressive enough?

## Continuous Metadata Queries
- See Praveen Seshadri’s work on SEQ and SEQUIN for langauge and optimization ideas
- Probably also want to go through the stream query lit
- Need queries to be “federated” across metadata and data
     - Make sure temporal semantics align with stream data query semantics (BtrDB?)
     - Aligning timestamps of data and queries across the two systems
     - Continuous metadata queries

## Post-Hod Time Rectification
- A challenge: post-hoc time rectification
       - Temporal data cleaning challenges
       - More generally, temporal semantics.  See the work of Snodgrass etc on TSQL.
       - See the Antelope/ReplayDB philosophy of “log” vs. “computations over the log”

## SQL Implementation
- discussion of how relational and temporal predicates where implemented
- SQL's lack of `argmin` makes queries long, complicated to read (humans cannot generate them by hand),
    and possibly slow
- can we quantify how slow the queries are in terms of scans, unions, joins, "not in", etc?
- some benchmarks here?
